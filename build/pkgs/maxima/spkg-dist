#!/usr/bin/env python

import os, sys, time

def cmd(x):
    print x
    if os.system(x):
        print "(Failed.)"

DIR = os.path.split(os.path.abspath(os.curdir))[1]
if os.path.exists(DIR):
    cmd('rm -rf "%s"*'%DIR)

os.makedirs('../tmp_%s'%DIR)
cmd("cp -r * ../tmp_%s"%DIR)
cmd('mv ../tmp_%s %s'%(DIR,DIR))

for X in ['es', 'es.utf8', 'pt', 'pt.utf8', 'pt_BR', 'pt_BR.utf8']:
    cmd('cd "%s" && rm -rf "doc/info/%s/"*'%(DIR, X))
    open('%s/doc/info/%s/Makefile.in'%(DIR,X),'w').write('all:\n\tls\n\n')

print "Making spkg"
cmd("sage -pkg %s"%DIR)
